<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8" />
	<script type='text/javascript' src='knockout-3.2.0.js'></script>
	<script>
	var ViewModel = {
		words : ko.observableArray([]),

		completeWord : function(w) {
			var w_json = JSON.stringify(w);
			addon.port.emit("delete", w_json);
		},

		completeAllWords : function() {
			addon.port.emit("delete-all");
		},
	};

	window.onload = function() {
		console.log("window onloads");
		ko.applyBindings(ViewModel);
	};

	addon.port.on("ping", function() {
		console.log("sidebar script got the message");
		addon.port.emit("pong");
	});

	addon.port.on("refresh", function(data) {
		var model = JSON.parse(data);
		ViewModel.words(model);
	});
	</script>
	<style>
		img div {
			margin:0px;
			padding:0px;
		}
		body {
			width: 100%;
			margin:0px;
			padding:0px;
		}
		.table_row {
			width:100%;
			display:table;
			margin-top: 3px;
			margin-bottom: 3px;
		}
		.word_col {
			width: calc(100% - 40px);
			display:table-cell;
			background-color:#cff;

			word-break:break-all;
			//word-wrap: break-word;

			vertical-align: middle;

			padding: 2px;
		}
		.del_col {
			width: 32px;
			display:table-cell;
			background-color:#fcf;

			vertical-align: middle;

			cursor: pointer;
			padding: 4px;
		}
	</style>
</head>
<body>
<div style="padding:1px;">
	<!-- ko foreach: words -->
	<div class="table_row">
		<div class="word_col" data-bind="text: word"></div>
		<div class="del_col">
			<img style="vertical-align: middle;" src="icon-32.png"
				data-bind="click: $root.completeWord"/>
		</div>
	</div>
	<!-- /ko -->
	<button type="button" data-bind="click: completeAllWords">clear all</button>
</div>

</body>
</html>
